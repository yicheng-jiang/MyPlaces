(function(){angular.module("myPlacesApp",["ngRoute"]);function e(e){console.log("routeProvider is called");e.when("/",{templateUrl:"home/home.view.html",controller:"homeCtrl",controllerAs:"vm"}).otherwise({redirectTo:"/"})}angular.module("myPlacesApp").config(["$routeProvider",e])})();(function(){angular.module("myPlacesApp").controller("homeCtrl",e);e.$inject=["$scope","myplacesData","geolocation"];function e(o,n,e){console.log("homeCtrl controller called");var a=this;a.pageHeader={title:"MyPlaces",strapline:"Find places to work with wifi near you!"};a.sidebar={content:"Looking for wifi and a seat etc etc"};a.message="Checking your location";a.getData=function(e){var o=e.coords.latitude,t=e.coords.longitude;a.message="Searching for nearby places";n.locationByCoords(o,t).then(function(e){a.data={locations:e.data};a.message=e.data.length>0?"":"No locations found";console.log(a.data)},function(e){a.message="Sorry, something's gone wrong";console.log(e)})};a.showError=function(e){o.$apply(function(){a.message=e.message})};a.noGeo=function(){o.$apply(function(){a.message="Geolocation not supported by this browser."})};e.getPosition(a.getData,a.showError,a.noGeo)}})();(function(){var e=function(){console.log("geolocation service called");var e=function(e,o,t){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(e,o)}else{t()}};return{getPosition:e}};angular.module("myPlacesApp").service("geolocation",e)})();(function(){angular.module("myPlacesApp").service("myplacesData",e);e.$inject=["$http"];function e(t){console.log("myplacesData service called");var e=function(e,o){return t.get("/api/locations?lng="+o+"&lat="+e+"&maxDistance=20")};return{locationByCoords:e}}})();(function(){var n=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};var e=function(){return function(e){var o,t;console.log("formatDistance filter called");if(e===0||e&&n(e)){if(e>1){o=parseFloat(e).toFixed(1);t="km"}else{o=parseInt(e*1e3,10);t="m"}return o+t}else{return"?"}}};angular.module("myPlacesApp").filter("formatDistance",e)})();(function(){angular.module("myPlacesApp").directive("ratingStars",e);function e(){console.log("ratingStars filter loaded");return{scope:{thisRating:"=rating"},restrict:"EA",templateUrl:"/common/directives/ratingStars/ratingStars.template.html"}}})();(function(){angular.module("myPlacesApp").directive("footerGeneric",e);function e(){return{restrict:"EA",templateUrl:"/common/directives/footerGeneric/footerGeneric.template.html"}}})();(function(){anguler.module("myPlacesApp").directive("navigation",e);function e(){return{retstrict:"EA",templateUrl:"/common/directives/navigation/navigation.template.html"}}})();